# é¡¹ç›®è¯¦ç»†è®¾è®¡ç»“æ„è¯´æ˜

## ä¸€ã€æ ¸å¿ƒæ¨¡å—ï¼ˆcoreï¼‰

| æ¨¡å—ï¼ˆæ–‡ä»¶å¤¹ï¼‰ | å­æ¨¡å— / æ–‡ä»¶                                              | èŒè´£æè¿°                          | ä¼˜åŒ–è¦ç‚¹è¯´æ˜                                    |
|---------------|------------------------------------------------------------|-----------------------------------|-------------------------------------------------|
| canvas        | canvas_renderer.dart<br/>canvas_controller.dart<br/>canvas_interaction_manager.dart | ç”»å¸ƒæ¸²æŸ“åŠåŸºç¡€äº¤äº’ç®¡ç†ï¼ˆç¼©æ”¾ã€å¹³ç§»ï¼‰ | æ˜ç¡®åŒºåˆ† Canvas çŠ¶æ€ä¸äº¤äº’ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤         |
| node          | node_model.dart<br/>node_renderer.dart<br/>node_controller.dart<br/>node_interaction_manager.dart | èŠ‚ç‚¹çš„çŠ¶æ€ã€æ¸²æŸ“ã€äº¤äº’é€»è¾‘          | å¼•å…¥ NodeControllerï¼Œåˆ†ç¦»æ•°æ®é€»è¾‘ä¸äº¤äº’äº‹ä»¶å¤„ç† |
| edge          | edge_model.dart<br/>edge_renderer.dart<br/>edge_controller.dart<br/>edge_interaction_manager.dart | è¾¹çš„çŠ¶æ€ã€æ¸²æŸ“ã€äº¤äº’é€»è¾‘            | å¼•å…¥ EdgeController ç®¡ç†è¾¹çŠ¶æ€ï¼Œé€»è¾‘åˆ†ç¦»        |
| anchor        | anchor_model.dart<br/>anchor_renderer.dart<br/>anchor_interaction_manager.dart | é”šç‚¹çŠ¶æ€ã€æ¸²æŸ“ã€äº¤äº’é€»è¾‘            | æ˜ç¡®é”šç‚¹ç‹¬ç«‹æ€§ï¼Œä¾¿äºæ‰©å±•è‡ªå®šä¹‰ Anchor UI         |
| selection     | selection_manager.dart<br/>box_selection_handler.dart<br/>selection_renderer.dart | é€‰ä¸­é€»è¾‘ï¼ˆå•é€‰ã€å¤šé€‰ã€æ¡†é€‰ï¼‰åŠé«˜äº®æ¸²æŸ“ | è®¾è®¡æˆç‹¬ç«‹çš„çŠ¶æ€æœºï¼Œæå‡æ‰©å±•æ€§                   |
| interactions  | mouse_event_dispatcher.dart<br/>keyboard_event_dispatcher.dart<br/>interaction_mode_controller.dart<br/>interaction_state_machine.dart | é¼ æ ‡/é”®ç›˜äº‹ä»¶ç»Ÿä¸€å¤„ç†ã€äº¤äº’æ¨¡å¼ç®¡ç† | æ–°å¢ InteractionStateMachine æé«˜äº‹ä»¶å¤„ç†æ¸…æ™°åº¦  |

## äºŒã€æ’ä»¶ï¼ˆpluginsï¼‰

| æ’ä»¶æ¨¡å—           | æ–‡ä»¶                         | èŒè´£æè¿°      | ä¼˜åŒ–è¦ç‚¹è¯´æ˜                              |
|-------------------|------------------------------|---------------|-------------------------------------------|
| context_menu      | context_menu_plugin.dart     | å³é”®èœå•æ’ä»¶  | å®ç°æ ‡å‡†æ’ä»¶æ¥å£ï¼Œæé«˜ç»Ÿä¸€æ€§ä¸å¤ç”¨æ€§       |
| hover_highlight   | hover_highlight_plugin.dart  | æ‚¬åœé«˜äº®      | æ’ä»¶æ¨¡å¼ç»Ÿä¸€ï¼Œå…è®¸çƒ­æ’æ‹”ã€åŠ¨æ€å¯ç”¨æˆ–ç¦ç”¨   |
| quick_connection  | quick_connection_plugin.dart | å¿«é€Ÿè¿æ¥æ’ä»¶  | ä¼˜åŒ–æ’æ‹”æµç¨‹ï¼Œé¿å…ä¸ Edge é€»è¾‘è€¦åˆ        |
| custom_plugins    | ç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶æ¨¡æ¿           | æ ‡å‡†æ’ä»¶æ¨¡æ¿  | ä¾¿äºå¼€å‘äººå‘˜å¿«é€Ÿåˆ›å»ºè‡ªå®šä¹‰æ’ä»¶            |

## ä¸‰ã€Hooksï¼ˆhooksï¼‰

| Hooksæ¨¡å—   | æ–‡ä»¶                | èŒè´£æè¿°        | ä¼˜åŒ–è¦ç‚¹è¯´æ˜                                   |
|------------|---------------------|-----------------|------------------------------------------------|
| node_hooks | use_node_hook.dart  | èŠ‚ç‚¹ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ | å¢åŠ ç»†ç²’åº¦ hook (`onDragStart`, `onDragEnd`)   |
| edge_hooks | use_edge_hook.dart  | è¾¹ç”Ÿå‘½å‘¨æœŸäº‹ä»¶   | å¢åŠ  `onEdgeCreate`ã€`onEdgeDelete` é’©å­       |
| canvas_hooks | use_canvas_hook.dart | ç”»å¸ƒç”Ÿå‘½å‘¨æœŸäº‹ä»¶ | æä¾›ç”»å¸ƒåŠ è½½å®Œæˆã€å¸ƒå±€æ”¹å˜äº‹ä»¶                 |

## å››ã€çŠ¶æ€ç®¡ç†ï¼ˆstate_managementï¼‰

| çŠ¶æ€æ¨¡å—            | æ–‡ä»¶                                    | èŒè´£æè¿°             | ä¼˜åŒ–è¦ç‚¹è¯´æ˜                                  |
|---------------------|----------------------------------------|----------------------|-----------------------------------------------|
| canvas_state        | canvas_state.dart<br/>canvas_state_provider.dart | ç”»å¸ƒæ•´ä½“çŠ¶æ€ç®¡ç†       | ç»†åˆ† viewportState, scaleStateï¼Œä¼˜åŒ–æ¸²æŸ“æ€§èƒ½  |
| node_state          | node_state.dart<br/>node_state_provider.dart | èŠ‚ç‚¹çŠ¶æ€ç®¡ç†           | å¢åŠ çŠ¶æ€å¿«ç…§ï¼ˆsnapshotï¼‰ï¼Œå®ç° undo/redo åŠŸèƒ½ |
| edge_state          | edge_state.dart<br/>edge_state_provider.dart | è¾¹çŠ¶æ€ç®¡ç†             | åŒ Nodeï¼Œå®ç°çŠ¶æ€å¿«ç…§ï¼Œä¾¿äºæ’¤é”€ä¸é‡åš          |
| interaction_state   | interaction_state.dart                  | å½“å‰äº¤äº’æ¨¡å¼çŠ¶æ€       | ä½¿ç”¨çŠ¶æ€æœºæ¨¡å¼ï¼Œä¾¿äºæ¨¡å¼æ‰©å±•ä¸æ¸…æ™°ç®¡ç†         |

## äº”ã€å•å…ƒä¸äº¤äº’æµ‹è¯•ï¼ˆtestsï¼‰

| æµ‹è¯•æ¨¡å—      | æ–‡ä»¶                                        | èŒè´£æè¿°             | ä¼˜åŒ–è¦ç‚¹è¯´æ˜                           |
|--------------|--------------------------------------------|----------------------|----------------------------------------|
| canvas_tests | canvas_controller_test.dart                 | ç”»å¸ƒç›¸å…³å•å…ƒä¸ widget æµ‹è¯• | ç»†åˆ†çŠ¶æ€æµ‹è¯•ä¸äº¤äº’æµ‹è¯•                 |
| node_tests   | node_model_test.dart<br/>node_interaction_test.dart | èŠ‚ç‚¹çŠ¶æ€ã€æ¸²æŸ“ã€äº¤äº’åŠŸèƒ½æµ‹è¯• | è¦†ç›–äº¤äº’è¾¹ç•Œæƒ…å†µå’Œå¼‚å¸¸æƒ…å†µ             |
| edge_tests   | edge_model_test.dart<br/>edge_interaction_test.dart | è¾¹çŠ¶æ€ã€æ¸²æŸ“ã€äº¤äº’åŠŸèƒ½æµ‹è¯•   | å¢åŠ è¿çº¿åˆ›å»ºçš„è¾¹ç•Œæµ‹è¯•                 |

## å…­ã€å·¥å…·ç±»ï¼ˆutilsï¼‰

| å·¥å…·æ¨¡å—            | æ–‡ä»¶                   | èŒè´£æè¿°                      | ä¼˜åŒ–è¦ç‚¹è¯´æ˜                                     |
|---------------------|------------------------|-------------------------------|--------------------------------------------------|
| geometry_utils      | geometry_utils.dart    | å‡ ä½•è®¡ç®—ã€ç¢°æ’æ£€æµ‹ã€åæ ‡å˜æ¢  | å¢åŠ ç©ºé—´ç´¢å¼•ï¼ˆå¦‚ Quadtreeï¼‰ä¼˜åŒ–ç¢°æ’æ£€æµ‹æ€§èƒ½      |
| color_utils         | color_utils.dart       | é¢œè‰²ç®¡ç†å·¥å…·                  | æ”¯æŒä¸»é¢˜æ¨¡å¼åˆ‡æ¢ï¼ˆäº®/æš—æ¨¡å¼ï¼‰                    |
| performance_utils   | performance_utils.dart | æ€§èƒ½ç›‘æ§ä¸åˆ†æå·¥å…·            | å®æ—¶æ€§èƒ½ç›‘æ§æ’ä»¶ï¼Œå¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆ               |

## ä¸ƒã€é…ç½®ç®¡ç†ï¼ˆconfigï¼‰

| é…ç½®æ¨¡å—           | æ–‡ä»¶                   | èŒè´£æè¿°                     | ä¼˜åŒ–è¦ç‚¹è¯´æ˜                             |
|--------------------|------------------------|------------------------------|------------------------------------------|
| interaction_config | interaction_config.dart | äº¤äº’ç›¸å…³é…ç½®                 | æä¾›å¯åºåˆ—åŒ–é…ç½®ï¼Œå…è®¸ä¿å­˜ä¸æ¢å¤ç”¨æˆ·è®¾ç½® |
| theme_config       | theme_config.dart      | UI ä¸»é¢˜é…ç½®                  | æ”¯æŒåŠ¨æ€ä¸»é¢˜åˆ‡æ¢ï¼Œä¼˜åŒ–è§†è§‰ä½“éªŒ            |
| graph_config       | graph_config.dart      | å…¨å±€ç”»å¸ƒã€èŠ‚ç‚¹ã€è¾¹ã€é”šç‚¹çš„é…ç½® | åˆ†æ¨¡å—å®šä¹‰ï¼Œæä¾›æ¨¡å—çº§åˆ«å•ç‹¬é…ç½®         |

## å…«ã€UIç»„ä»¶ï¼ˆui_componentsï¼‰

| UIç»„ä»¶æ¨¡å—  | æ–‡ä»¶             | èŒè´£æè¿°                       | ä¼˜åŒ–è¦ç‚¹è¯´æ˜                          |
|-------------|------------------|--------------------------------|---------------------------------------|
| buttons     | æ ‡å‡†æŒ‰é’®ç»„ä»¶     | é€šç”¨æŒ‰é’®ç»„ä»¶                   | å®šä¹‰æ ‡å‡†æ ·å¼æŒ‰é’®ï¼Œç»Ÿä¸€è§†è§‰é£æ ¼         |
| menus       | èœå•ç»„ä»¶         | èœå•ç»„ä»¶ï¼ˆå³é”®èœå•ã€èŠ‚ç‚¹èœå•ï¼‰ | ç»Ÿä¸€é£æ ¼ä¸æ¥å£ï¼Œæ–¹ä¾¿å¤ç”¨              |
| toolbars    | å·¥å…·æ ç»„ä»¶       | é¡¶éƒ¨æ“ä½œæ                      | æ”¯æŒçµæ´»å¸ƒå±€ï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰          |

## ä¹ã€ç¤ºä¾‹ä¸æ–‡æ¡£ï¼ˆexamples & documentationï¼‰

| ç¤ºä¾‹ä¸æ–‡æ¡£æ¨¡å— | æ–‡ä»¶                                                    | èŒè´£æè¿°                           | ä¼˜åŒ–è¦ç‚¹è¯´æ˜                             |
|---------------|---------------------------------------------------------|------------------------------------|------------------------------------------|
| examples      | basic_workflow_example.dart<br/>advanced_workflow_example.dart | åŠŸèƒ½ä¸æ’ä»¶ç¤ºä¾‹å±•ç¤º                 | æä¾›åŸºç¡€å’Œé«˜çº§ç¤ºä¾‹æŒ‡å¯¼å¼€å‘               |
| documentation | getting_started.md<br/>plugins_development_guide.md<br/>hooks_usage.md | å¿«é€Ÿå¼€å§‹ã€æ’ä»¶ä¸ Hooks å¼€å‘æŒ‡å— | æä¾›æ¸…æ™°æŒ‡å¯¼ï¼Œç¡®ä¿å¼€å‘è€…æ˜“äºä¸Šæ‰‹         |

---

## ğŸ“Œ æ€»ä½“ç»“æ„è®¾è®¡ç›®æ ‡ï¼š

- **é«˜å†…èšä½è€¦åˆ**ï¼šå„æ¨¡å—ç‹¬ç«‹æ˜ç¡®ï¼Œå‡å°‘ç›¸äº’ä¾èµ–ã€‚
- **å¯æ‰©å±•æ€§**ï¼šä¾¿äºæ–°åŠŸèƒ½çš„å¿«é€Ÿå¼€å‘å’Œç°æœ‰åŠŸèƒ½çš„æ‰©å±•ã€‚
- **å¯æµ‹è¯•æ€§**ï¼šæ¸…æ™°å®šä¹‰å„æ¨¡å—èŒè´£ï¼Œæ˜“äºæµ‹è¯•ä¸ç»´æŠ¤ã€‚
- **å¯æ’æ‹”æ€§**ï¼šæä¾›ç»Ÿä¸€æ’ä»¶æœºåˆ¶ï¼Œå…è®¸ç”¨æˆ·å¿«é€Ÿè‡ªå®šä¹‰æ’ä»¶ã€‚
- **æ–‡æ¡£æ¸…æ™°**ï¼šä¸ºå¼€å‘è€…æä¾›æ˜ç¡®ã€æ˜“æ‡‚çš„æ–‡æ¡£æŒ‡å¼•ï¼Œé™ä½å¼€å‘é—¨æ§›ã€‚